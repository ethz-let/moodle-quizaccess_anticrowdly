define(['jquery','core/modal', 'core/str'], function($, modal, str) {

      
      function checkaiextension() {
      
      var extension_id = "idipjdgkafkkbklacjonnhkammdpigol";
      
      detect(
        extension_id,
        function() {
          display("You have Crowdly AI installed. You must uninstall it before proceeding.");
        }
      );
      
      function display(msg) {
        console.error(msg);
        modal.create({
        title: str.get_string('notallowed', 'quizaccess_antiai'),
        body: str.get_string('aiextensionfound', 'quizaccess_antiai'),
        large: false,
        show: true,
        });
      }
      
      function detect(extension_id, if_installed, if_not_installed) {
        var s = document.createElement('script');
        s.onerror = if_not_installed;
        s.onload = if_installed;
        document.body.appendChild(s);
        s.src = "chrome-extension://" + extension_id + '/src/styles.css';
      }
    }
    return {
        init: function() {
            checkaiextension();
        }
    };
});